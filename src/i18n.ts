// 轻量级多语言支持（无外部依赖）
// - 仅覆盖“用户可见 UI 文案”（菜单、按钮、页签、对话框、空态、关于）
// - 默认跟随系统语言；可通过菜单切换：自动/中文/English

export type LocalePref = 'auto' | 'zh' | 'en'
export type Locale = 'zh' | 'en'

const LS_KEY = 'flymd.locale'

function detectSystemLocale(): Locale {
  try {
    const lang = (navigator.language || navigator['userLanguage'] || 'en').toLowerCase()
    if (lang.startsWith('zh')) return 'zh'
  } catch {}
  return 'en'
}

export function getLocalePref(): LocalePref {
  try {
    const v = localStorage.getItem(LS_KEY) as LocalePref | null
    if (v === 'zh' || v === 'en' || v === 'auto') return v
  } catch {}
  return 'auto'
}

export function setLocalePref(v: LocalePref) {
  try {
    localStorage.setItem(LS_KEY, v)
  } catch {}
  try {
    const win: any = typeof window !== 'undefined' ? window : null
    if (win && typeof win.dispatchEvent === 'function' && typeof win.CustomEvent === 'function') {
      const ev = new win.CustomEvent('flymd:localeChanged', { detail: { pref: v } })
      win.dispatchEvent(ev)
    }
  } catch {}
}

export function getLocale(): Locale {
  const pref = getLocalePref()
  if (pref === 'zh' || pref === 'en') return pref
  return detectSystemLocale()
}

// UI 字典
const dict = {
  zh: {
    'menu.file': '文件',
    'menu.mode': '模式',
    'menu.recent': '最近',
    'menu.uploader': '图床',
    'menu.extensions': '扩展',
    'menu.update': '更新',
    'menu.about': '关于',
    'menu.language': '语言',
    'menu.plugins': '插件',
    'menu.theme': '主题',
    'menu.plugins.tooltip': '扩展插件菜单',
    'menu.theme.tooltip': '主题设置',
    'theme.panel.title': '主题设置',
    'theme.panel.close': '关闭',
    'theme.focusMode': '专注模式',
    'theme.wysiwygMode': '所见模式',
    'theme.sourceMode': '源码模式',
    'theme.wysiwygHtmlTable': 'HTML表格编辑',
    'theme.wysiwygHtmlTable.tip': '所见模式把 <table> 转为 Markdown 表格（会改写内容）',
    'theme.darkMode': '夜间模式',
    'theme.compactTitlebar': '紧凑标题栏',
    'theme.editBg': '编辑背景',
    'theme.readBg': '阅读背景',
    'theme.wysiwygBg': '所见背景',
    'theme.parchment': '羊皮风格',
    'theme.apply': '应用',
    'theme.gridBg': '网格背景',
    'theme.mdStyle': 'Markdown 风格',
    'theme.fontSection': '字体选择',
    'theme.font.body': '正文字体',
    'theme.font.mono': '等宽字体',
    'theme.font.size': '字体大小',
    'theme.font.bodyGlobal': '正文字体全局生效（包括菜单和插件）',
    'theme.layoutSection': '排版设置',
    'theme.layout.lineHeight': '行高',
    'theme.layout.paragraphSpacing': '段落间距',
    'theme.layout.contentWidth': '内容宽度',
    'theme.layout.autoWidth': '自适应',
    'theme.layout.textIndent': '首行缩进',
    'theme.layout.reset': '重置排版',
    'menu.plugins.manage': '菜单管理',
    'menu.portableMode': '便携模式',
    'portable.enabling': '正在开启便携模式…',
    'portable.enabled': '便携模式已开启，所有配置写入根目录方便携带',
    'portable.disabled': '便携模式已关闭',
    'portable.enabledShort': '已开启',
    'portable.disabledShort': '未开启',
    'portable.toggleFail': '切换便携模式失败',
    'portable.tooltip': '开启后将在程序目录写入所有配置，方便在U盘等便携设备上使用',
    'menu.exportConfig': '导出配置',
    'menu.importConfig': '导入配置',

    'file.new': '新建',
    'file.open': '打开…',
    'file.save': '保存',
    'file.saveas': '另存为…',
    'file.autosave': '自动保存',
    'autosave.enabled': '自动保存已开启',

    'mode.edit': '源码',
    'mode.read': '阅读',
    'mode.wysiwyg': '所见',

    'tab.files': '目录',
    'tab.outline': '大纲',
    'tab.files.short': '目录',
    'tab.outline.short': '大纲',
    'outline.layout': '大纲布局',
    'outline.pin.auto': '自动隐藏',
    'outline.pin.fixed': '固定',

    'lib.menu': '库',
    'lib.toggle': '显示/隐藏文件树 (Ctrl+Shift+Z)',
    'lib.choose': '库管理',
    'lib.refresh': '刷新',
    'lib.choose.short': '库管理',
    'lib.refresh.short': '刷新',
    'lib.pin.auto': '自动',
    'lib.pin.fixed': '固定',
    'lib.side.left': '左侧',
    'lib.side.right': '右侧',
    'lib.side.toggle': '切换库位置',

    'about.title': '关于',
    'about.tagline': '一款跨平台、轻量稳定好用的 Markdown 编辑 PDF 阅读工具。',
    'about.close': '关闭',
    'about.license.brief': 'GNU 通用公共许可证 第 3 版 (GPL-3.0)',
    'about.license.link': '查看完整许可文本',
    'about.official': '官方网站',
    'about.blog': '个人网站：',
    'about.github': 'GitHub：',
    'about.shortcuts': '快捷键',
    'about.shortcuts.action': '操作',
    'about.shortcuts.keys': '快捷键',

    'sc.newFile': '新建文件',
    'sc.openFile': '打开文件',
    'sc.saveFile': '保存文件',
    'sc.saveAs': '另存为',
    'sc.toggleWysiwyg': '切换所见模式',
    'sc.toggleEditPreview': '切换编辑/预览',
    'sc.focusMode': '专注模式',
    'sc.newTab': '新建标签页',
    'sc.findReplace': '查找替换',
    'sc.commandPalette': '命令面板',
    'sc.toggleFileTree': '显示/隐藏文件树',
    'sc.print': '打印',
    'sc.insertLink': '插入链接',
    'sc.bold': '加粗',
    'sc.italic': '斜体',
    'sc.splitPreview': '分屏预览',
    'sc.closeTab': '关闭当前标签页',
    'sc.cycleTabs': '循环切换标签',
    'sc.openInNewTabFromLibrary': '从库中新标签打开',
    'sc.adjustWidth': '调整内容区宽度',
    'sc.zoom': '缩放文字/图片',
    'sc.nativeMenu': '呼出原生菜单',

    'dlg.ok': '确定',
    'dlg.cancel': '取消',
    'dlg.insert': '插入',
    'dlg.rename': '重命名',
    'dlg.link': '插入链接',
    'dlg.text': '文本',
    'dlg.url': 'URL',
    'dlg.test': '测试连接',
    'dlg.link.text.ph': '链接文本',
    'dlg.url.ph': 'https://',
    'dlg.name': '名称',
    'dlg.name.ph': '请输入新名称',
    'dlg.ext': '后缀',
    // 通用/对话框扩展
    'dlg.delete': '删除',
    // 退出确认
    'dlg.exit.title': '退出确认',
    'dlg.exit.unsaved': '检测到当前文档有未保存的更改',
    'dlg.exit.save': '保存并退出',
    'dlg.exit.discard': '直接退出',
    // 库删除
    'dlg.libDelete.title.file': '删除文档',
    'dlg.libDelete.title.dir': '删除文件夹',
    'dlg.libDelete.name.file': '该文件',
    'dlg.libDelete.name.dir': '该文件夹',
    'dlg.libDelete.msg.file': '确定删除文档「{name}」？\n此操作将把文件移动到回收站。',
    'dlg.libDelete.msg.dir': '确定删除文件夹「{name}」及其所有内容？\n此操作将把文件移动到回收站。',
    // WebDAV 同步相关对话框
    'dlg.sync.conflict.title': '文件冲突',
    'dlg.sync.conflict.msg': '文件：{name}\n\n本地和远程都已修改此文件。请选择要保留的版本：',
    'dlg.sync.conflict.remote': '保留远程版本',
    'dlg.sync.conflict.local': '保留本地版本',
    'dlg.sync.localDelete.title': '文件已删除',
    'dlg.sync.localDelete.msg': '文件：{name}\n\n此文件在上次同步后被本地删除。请选择操作：',
    'dlg.sync.localDelete.restore': '从远程恢复',
    'dlg.sync.localDelete.deleteRemote': '同步删除远程',
    'dlg.sync.remoteDelete.title': '远程文件已删除',
    'dlg.sync.remoteDelete.msg': '文件：{name}\n\n此文件在远程服务器上已不存在。请选择操作：',
    'dlg.sync.remoteDelete.keepLocal': '保留本地文件',
    'dlg.sync.remoteDelete.deleteLocal': '同步删除本地',
    'dlg.sync.uploadMissing.title': '上传本地文件到远端',
    'dlg.sync.uploadMissing.msg': '文件：{name}\n\n本地存在该文件，但远端当前不存在（可能是新建，也可能是被其他设备删除）。请选择操作：',
    'dlg.sync.uploadMissing.keepLocal': '仅保留本地',
    'dlg.sync.uploadMissing.upload': '上传到远端',

    'status.pos': '行 {line}, 列 {col}',
    'filename.untitled': '未命名',
    'editor.placeholder': '在此输入 Markdown 文本……',

    // 图床设置（S3/R2 + ImgLa）
    'upl.title': '图床设置',
    'upl.desc': '用于将粘贴/拖拽的图片自动上传到所选图床，保存后即生效（仅在启用时）。',
    'upl.section.provider': '图床类型',
    'upl.provider': '选择图床',
    'upl.provider.s3': 'S3/R2图床',
    'upl.provider.imgla': '兰空/ImgLa 图床',
    'upl.provider.hint': '只显示当前选择图床的配置项；切换不会清空另一种图床的配置',
    'upl.refresh': '刷新',
    'upl.section.basic': '基础配置',
    'upl.enable': '启用',
    'upl.alwaysLocal': '总是保存到本地',
    'upl.hint.alwaysLocal': '开启后，无论图床是否启用，粘贴/拖拽/链接插入的图片都会复制到当前文档同目录的 images 文件夹，并立即生效',
    'upl.ak': 'AccessKeyId',
    'upl.ak.ph': '必填',
    'upl.sk': 'SecretAccessKey',
    'upl.sk.ph': '必填',
    'upl.bucket': 'Bucket',
    'upl.bucket.ph': '必填',
    'upl.endpoint': '自定义节点地址',
    'upl.endpoint.ph': '例如 https://xxx.r2.cloudflarestorage.com',
    'upl.endpoint.hint': 'R2: https://<accountid>.r2.cloudflarestorage.com；S3: https://s3.<region>.amazonaws.com',
    'upl.region': 'Region（可选）',
    'upl.region.ph': 'R2 用 auto；S3 如 ap-southeast-1',
    'upl.section.access': '访问域名与路径',
    'upl.domain': '自定义域名',
    'upl.domain.ph': '例如 https://img.example.com',
    'upl.domain.hint': '填写后将使用该域名生成公开地址',
    'upl.template': '上传路径模板',
    'upl.template.ph': '{year}/{month}{fileName}{md5}.{extName}',
    'upl.template.hint': '可用变量：{year}{month}{day}{fileName}{md5}{extName}',
    'upl.section.advanced': '高级选项',
    'upl.pathstyle': 'Path-Style（R2 建议）',
    'upl.acl': 'public-read',
    // ImgLa（Lsky Pro+）
    'upl.imgla.section': '兰空/ImgLa（Lsky Pro+）',
    'upl.imgla.home': 'ImgLa图床官网',
    'upl.imgla.baseUrl': '接口地址',
    'upl.imgla.baseUrl.ph': '默认 https://www.imgla.net',
    'upl.imgla.baseUrl.hint': '兼容兰空（Lsky Pro+）API；留空则使用默认值（无需填写末尾 /）',
    'upl.imgla.token': '令牌',
    'upl.imgla.token.ph': 'Bearer Token',
    'upl.imgla.token.hint': '在 ImgLa 后台创建 Token；此处仅保存在本地设置中',
    'upl.imgla.strategy': '策略 ID',
    'upl.imgla.strategy.ph': '默认 1',
    'upl.imgla.strategy.hint': '上传时使用的 strategy_id（通常为数字）',
    'upl.imgla.album': '相册范围',
    'upl.imgla.album.hint': '相册下拉以远端为准；相册插件只展示所选相册内的图片',
    // WebP 转换
    'upl.webp.enable': '转WebP[Gif直接跳过]',
    'upl.webp.quality': 'WebP 质量',
    'upl.webp.quality.hint': '范围 0.6–0.95，默认 0.85；数值越大质量越高但体积更大',
    'upl.webp.local': '本地保存也转为 WebP',

    // WebDAV 同步
    'sync.title': 'WebDAV 同步设置',
    'sync.desc': '自动同步库文件到 WebDAV 服务器。首次上传需要计算哈希值，耗时较长。',
    'sync.warn.global': '⚠️ 同步功能上线不久，仍在测试。请务必备份数据。',
    'sync.section.basic': '基础配置',
    'sync.enable': '启用同步',
    'sync.onstartup': '启动时同步',
    'sync.onshutdown': '关闭前同步',
    'sync.warn.onshutdown': '⚠️ 启用后，关闭窗口会隐藏到后台继续同步，同步完成后自动退出',
    'sync.allowHttp': '允许http',
    'sync.allowHttp.warn': '⚠️ 数据将以明文发送，有泄露风险！仅限可信网络！',
    'sync.allowHttp.hosts': '允许的HTTP主机',
    'sync.allowHttp.addHost': '添加主机',
    'sync.allowHttp.removeHost': '移除',
    'sync.allowHttp.hostPlaceholder': '例如 192.168.0.8 或 192.168.0.8:6086',
    'sync.allowHttp.hostsHint': '留空表示不限制；填写主机或主机:端口来限定HTTP同步目标',
    'sync.timeout.label': '超时(毫秒)',
    'sync.timeout.suggest': '建议 120000（2分钟），网络较慢时可适当增加',
    'sync.conflict': '冲突策略',
    'sync.conflict.newest': '自动选择较新文件（推荐）',
    'sync.conflict.ask': '每次询问用户',
    'sync.conflict.remote': '总是保留远程版本',
    'sync.conflict.hint': '当本地和远程文件都被修改时的处理策略',
    'sync.localDelete': '本地文件删除策略',
    'sync.localDelete.auto': '自动删除（远程已删除且本地未修改）',
    'sync.localDelete.ask': '询问用户',
    'sync.localDelete.keep': '始终保留本地文件',
    'sync.localDelete.hint': '当远程文件被删除时，如何处理本地文件',
    'sync.confirmDeleteRemote': '删除远程文件确认',
    'sync.confirmDeleteRemote.toggle': '删除远程文件时需要用户确认',
    'sync.confirmDeleteRemote.hint': '关闭后，删除操作将自动执行',
    'sync.encrypt.enable': '加密内容',
    'sync.encrypt.key': '加密密钥',
    'sync.encrypt.key.placeholder': '请输入至少 8 位的密钥',
    'sync.encrypt.key.hint': '',
    'sync.encrypt.warn': '⚠️ 所有上传到 WebDAV 的文件内容将被加密存储；务必牢记密钥！否则文件将无法解密。',
    'sync.encrypt.keyRequired': '已开启加密同步，但未填写有效密钥（至少 8 位）。',
    'sync.smartSkip': '智能跳过远程扫描（分钟）',
    'sync.smartSkip.hint': '若本地无修改且距上次同步未超过此时间，将跳过远程扫描（设为0则每次都扫描）',
    'sync.server': 'WebDAV 服务器',
    'sync.root.hint': '文件将同步到此路径下。库的配置相互独立，请勿使用相同目录。',
    'sync.user': '用户名',
    'sync.pass': '密码',
    'sync.tooltip.notConfigured': '当前库未配置 WebDAV，同步已禁用',
    'sync.tooltip.disabled': '已配置 WebDAV，但同步未启用',
    'sync.openlog': '同步记录',
    'sync.now': '立即同步(F5)',
    'sync.save': '保存',
    'sync.saved': '已保存 WebDAV 同步配置',
    'sync.save.fail': '保存失败: {msg}',

    // 文件树冲突弹窗
    'ft.move.within': '仅允许在库目录内移动',
    'ft.exists': '目标已存在',
    'ft.conflict.prompt': '请选择处理方式',
    'action.overwrite': '覆盖',
    'action.renameAuto': '自动改名',
    'action.cancel': '取消',

    // 语言菜单
    'lang.auto': '自动',
    'lang.zh': '中文',
    'lang.en': 'English',
    'lang.restartToApply': '请重启程序以全部应用新语言',

    // 右键菜单
    'ctx.newFile': '在此新建文档',
    'ctx.newFolder': '在此新建文件夹',
    'ctx.customIcon': '自定义图标',
    'ctx.moveTo': '移动到…',
    'ctx.pastePlain': '纯文本粘贴',
    'ctx.openNewInstance': '在新实例中打开',
    'ctx.createSticky': '生成便签',
    'ctx.rename': '重命名',
    'ctx.delete': '删除',
    'ctx.sortNameAsc': '按名称 A→Z',
    'ctx.sortNameDesc': '按名称 Z→A',
    'ctx.sortTimeDesc': '按修改时间 新→旧',
    'ctx.sortTimeAsc': '按修改时间 旧→新',

    // 扩展与插件
    'ext.title': '扩展与插件管理',
    'ext.install.section': '安装扩展（GitHub / URL / 本地）',
    'ext.install.placeholder': '输入 URL 或 username/repository@branch（branch 可省略）',
    'ext.install.btn': '安装',
    'ext.builtin': '内置扩展',
    'ext.installed': '已安装扩展',
    'ext.available': '扩展市场',
    'ext.market.channel': '渠道',
    'ext.market.channel.github': 'GitHub',
    'ext.market.channel.official': '官网',
    'ext.market.category.label': '分类',
    'ext.market.category.all': '全部分类',
    'ext.category.publishSync': '发布/同步',
    'ext.category.editing': '编辑增强',
    'ext.category.docTools': '文档工具',
    'ext.category.collab': '协同/版本',
    'ext.category.ai': 'AI',
    'ext.category.imageHosting': '图床上传',
    'ext.category.knowledge': '知识管理',
    'ext.market.search.placeholder': '搜索扩展名称、作者或说明…',
    'ext.market.empty.search': '没有匹配当前搜索条件的扩展',
    'ext.refresh': '刷新',
    'ext.update.btn': '更新',
    'ext.update.now': '立即更新',
    'ext.update.ok': '扩展已更新',
    'ext.update.fail': '更新扩展失败',
    'ext.update.notice.single': '{name} 扩展有新版本',
    'ext.update.notice.multi': '{count} 个扩展有新版本: {names}',
    'ext.settings': '设置',
    'ext.settings.notProvided': '该扩展未提供设置',
    'ext.settings.openFail': '打开扩展设置失败',
    'ext.toggle.enable': '启用',
    'ext.toggle.disable': '禁用',
    'ext.toggle.fail': '切换扩展失败',
    'ext.remove': '移除',
    'ext.remove.confirm': '确定移除扩展 {name} ？',
    'ext.removed': '已移除扩展',
    'ext.remove.fail': '移除扩展失败',
    'ext.install.ok': '安装成功',
    'ext.install.fail': '安装扩展失败',
    'ext.install.browseLocal': '浏览…',
    'ext.enabled.tag.on': '✓ 已启用',
    'ext.enabled.tag.off': '未启用',
    'ext.tag.featured': '推荐',
    'ext.author': '作者:',
    'ext.homepage': '主页',
    'ext.header.manage': '扩展管理',
    'ext.filter.installedOnly': '只看已安装',
    'ext.filter.updatesOnly': '仅可更新',
    'ext.filter.installedChip': '已安装',
    'ext.filter.showStandalone': '顶部菜单',
    'ext.filter.showStandalone.on': '已设置为顶部菜单',
    'ext.filter.showStandalone.off': '已收纳到插件菜单',
    'ext.filter.showStandalone.fail': '切换显示模式失败',
    'ext.chooseFolder.title': '选择扩展文件夹',
    'ext.market.loading': '扩展市场正在加载…',
    'ext.vendor.official': '官方',
    'ext.vendor.thirdParty': '第三方',
    'ext.thirdParty.notice': '所有第三方插件均已审核，但仍可能带来数据与隐私风险。',
    // 扩展市场官方插件多语言文案（桌面端与官网共用语义）
    'ext.ai.name': 'AI 助手',
    'ext.ai.author': '作者：飞速MarkDown',
    'ext.ai.desc': '智能写作助手，支持 AI 辅助写作、内容润色、语法检查和文本改错。让 AI 成为你的写作伙伴，显著提升写作效率和质量。支持多种 AI 模型，可自定义提示词。',
    'ext.pdf.name': '批量导出 PDF',
    'ext.pdf.author': '作者：飞速MarkDown',
    'ext.pdf.desc': '一次性选择多个 Markdown 文档并批量导出为 PDF 文件。非常适合需要批量处理文档的场景。',
    'ext.typechoPub.name': 'Typecho Publisher',
    'ext.typechoPub.author': '作者：HansJack',
    'ext.typechoPub.desc': '一键将 Markdown 文档发布到 Typecho 博客平台。支持文章编辑、分类管理、标签设置、图片自动上传等功能。让博客发布变得更加简单高效。',
    'ext.wordcount.name': '字数统计',
    'ext.wordcount.author': '作者：飞速MarkDown',
    'ext.wordcount.desc': '实时显示当前文档的字符数、单词数、段落数和阅读时间。帮助你更好地掌控文章篇幅，提高写作效率。支持中英文混合统计，精准可靠。',
    'ext.todoPush.name': '代办事项推送',
    'ext.todoPush.author': '作者：飞速MarkDown & xxtui',
    'ext.todoPush.desc': '智能提醒助手，自动识别文档中的未完成 TODO 事项，按设定时间通过微信、短信或邮箱推送给指定人员。支持自定义推送规则、多人协作提醒，让重要任务不再遗漏。',
    'ext.markdownTable.name': 'Markdown 表格助手',
    'ext.markdownTable.author': '作者：flyMD',
    'ext.markdownTable.desc': '在光标处快速插入 Markdown 表格，支持灵活设置行列数，提升编写表格的效率。',
    'ext.editorEnhancer.name': '编辑器增强',
    'ext.editorEnhancer.author': '作者：xxtui',
    'ext.editorEnhancer.desc': '在空行输入“/”启用指令，支持自定义触发词与模板，提升编辑效率。',
    'ext.gitHistory.name': 'Git 版本管理',
    'ext.gitHistory.author': '作者：flyMD',
    'ext.gitHistory.desc': '为当前库和文档提供 Git 快照与历史查看侧栏，并支持一键回滚到指定版本，帮助你安全管理历史版本。',
    'ext.backlinks.name': '双向链接（Backlinks）',
    'ext.backlinks.author': '作者：flyMD',
    'ext.backlinks.desc': '基于 [[标题]] 语法自动建立笔记之间的正向/反向链接，并提供反向链接侧边面板与 AI 关联推荐，打造轻量级知识网络。',
    'ext.graphView.name': '关系图谱（Graph View）',
    'ext.graphView.author': '作者：flyMD',
    'ext.graphView.desc': '基于双向链接索引的关系图谱视图，将当前文档作为中心展示局部关系网络，帮助你从全局视角理解笔记之间的关联。',
    'ext.officeImporter.name': 'Word/Excel 导入工具',
    'ext.officeImporter.author': '作者：flyMD',
    'ext.officeImporter.desc': '从本地 Word / Excel 文件解析并导入为 Markdown，保留基础结构，适合将现有文档迁移到 Markdown 工作流。',
    'ext.s3Gallery.name': '图床相册',
    'ext.s3Gallery.author': '作者：flyMD',
    'ext.s3Gallery.desc': '查看并管理图床图片，支持复制链接、插入当前文档以及删除远端对象。',
    'ext.autoyaml.name': 'AutoYAML 元数据',
    'ext.autoyaml.author': '作者：flyMD',
    'ext.autoyaml.desc': '自动为当前文档补全 YAML 前置信息（title/created/updated/tags 等），可选调用 AI 助手生成标签和摘要，简化元数据维护。',
    'ext.mineru.name': 'MinerU PDF/图片解析',
    'ext.mineru.author': '作者：flyMD',
    'ext.mineru.desc': '使用 MinerU 官方 API 对本地 PDF / 图片发起解析，返回结果压缩包链接。',
    'ext.typechoManager.name': 'Typecho 博文管理',
    'ext.typechoManager.author': '作者：flyMD',
    'ext.typechoManager.desc': '从 Typecho 拉取博文列表并下载为本地 Markdown，支持按时间 / 分类筛选，同时支持从当前文档覆盖远端文章，实现本地与博客的双向同步。',
    'ext.builtin.uploaderS3.name': '图床管理',
    'ext.builtin.uploaderS3.desc': '粘贴/拖拽图片自动上传，支持 S3/R2 直连，使用设置中的凭据。',
    'ext.builtin.webdav.name': 'WebDAV 同步',
    'ext.builtin.webdav.desc': 'F5/启动/关闭前同步，基于修改时间覆盖。',
    'ext.pdf2doc.name': 'PDF 高精度解析',
    'ext.pdf2doc.author': '作者：flyMD',
    'ext.pdf2doc.desc': '使用大模型高精度识别解析 PDF 为 Markdown 或 docx，支持手写、布局、公式和表格识别。',
    'ext.whiteboardView.name': '白板视图',
    'ext.whiteboardView.author': '作者：flyMD',
    'ext.whiteboardView.desc': '在可视化画布上摆放 Markdown 笔记节点并建立简单连接。',
    'ext.noteTemplates.name': '笔记与任务日历',
    'ext.noteTemplates.author': '作者：flyMD',
    'ext.noteTemplates.desc': '提供日记、会议记录、读书笔记等常用模板，并集成任务总览与简单日历视图，基于 YAML 前置信息与 TODO 语法构建规范化笔记与时间视图。',
    'ext.blinkoSnap.name': '发送到 Blinko',
    'ext.blinkoSnap.author': '作者：flyMD',
    'ext.blinkoSnap.desc': '右键菜单一键将当前内容发送到 Blinko。',
    'ext.floatingToolbar.name': '富文本悬浮工具条',
    'ext.floatingToolbar.author': '作者：flyMD',
    'ext.floatingToolbar.desc': '提供可拖拽且可吸附到顶部的悬浮工具条，并支持自定义标题快捷键等编辑增强功能。',
    'ext.propertyView.name': '属性视图',
    'ext.propertyView.author': '作者：flyMD',
    'ext.propertyView.desc': '基于 YAML 元数据和标签的属性查询与列表视图。',
    'ext.xhsCopywriter.name': '小红书文案生成',
    'ext.xhsCopywriter.author': '作者：Vita0519',
    'ext.xhsCopywriter.desc': '接入 AI，内置小红书爆款风格，支持一键润色、扩写与自定义提示词模板。',
    'ext.localCollab.name': '协同编辑',
    'ext.localCollab.author': '作者：flyMD',
    'ext.localCollab.desc': '连接协同服务器的简单多人协同插件。',

    // 插件菜单管理
    'plugins.menuManager.title': '扩展菜单管理',
    'plugins.menuManager.col.plugin': '扩展',
    'plugins.menuManager.col.context': '右键菜单',
    'plugins.menuManager.col.dropdown': '下拉菜单',
    'plugins.menuManager.tip': '勾选表示显示，取消勾选后对应菜单将被隐藏。',
    'plugins.menuManager.empty': '当前没有已注册的扩展菜单。',
  },
  en: {
    'menu.file': 'File',
    'menu.mode': 'Mode',
    'menu.recent': 'Recent',
    'menu.uploader': 'Image Bed',
    'menu.extensions': 'Extensions',
    'menu.update': 'Update',
    'menu.about': 'About',
    'menu.language': 'Language',
    'menu.plugins': 'Plugins',
    'menu.theme': 'Theme',
    'menu.plugins.tooltip': 'Plugin menu',
    'menu.theme.tooltip': 'Theme settings',
    'theme.panel.title': 'Theme Settings',
    'theme.panel.close': 'Close',
    'theme.focusMode': 'Focus mode',
    'theme.wysiwygMode': 'WYSIWYG mode',
    'theme.sourceMode': 'Source mode',
    'theme.wysiwygHtmlTable': 'Editable HTML tables',
    'theme.wysiwygHtmlTable.tip': 'Convert <table> blocks to Markdown tables in WYSIWYG (rewrites content)',
    'theme.darkMode': 'Dark mode',
    'theme.compactTitlebar': 'Compact title bar',
    'theme.editBg': 'Edit background',
    'theme.readBg': 'Read background',
    'theme.wysiwygBg': 'WYSIWYG background',
    'theme.parchment': 'Parchment style',
    'theme.apply': 'Apply',
    'theme.gridBg': 'Grid background',
    'theme.mdStyle': 'Markdown style',
    'theme.fontSection': 'Font selection',
    'theme.font.body': 'Body font',
    'theme.font.mono': 'Monospace font',
    'theme.font.size': 'Font size',
    'theme.font.bodyGlobal': 'Apply body font to UI (menus & plugins)',
    'theme.layoutSection': 'Layout settings',
    'theme.layout.lineHeight': 'Line height',
    'theme.layout.paragraphSpacing': 'Paragraph spacing',
    'theme.layout.contentWidth': 'Content width',
    'theme.layout.autoWidth': 'Auto',
    'theme.layout.textIndent': 'First-line indent',
    'theme.layout.reset': 'Reset layout',
    'menu.plugins.manage': 'Menu Manager',
    'menu.portableMode': 'Portable Mode',
    'portable.enabling': 'Enabling portable mode…',
    'portable.enabled': 'Portable mode enabled (auto backup to app root)',
    'portable.disabled': 'Portable mode disabled',
    'portable.enabledShort': 'On',
    'portable.disabledShort': 'Off',
    'portable.toggleFail': 'Failed to toggle portable mode',
    'portable.tooltip': 'When enabled, saves all configs next to the app so it can run from USB drives',
    'menu.exportConfig': 'Export Config',
    'menu.importConfig': 'Import Config',

    'file.new': 'New',
    'file.open': 'Open…',
    'file.save': 'Save',
    'file.saveas': 'Save As…',
    'file.autosave': 'Autosave',
    'autosave.enabled': 'Autosave enabled',

    'mode.edit': 'Edit',
    'mode.read': 'Preview',
    'mode.wysiwyg': 'WYSIWYG',

    'tab.files': 'Tree',
    'tab.outline': 'Outline',
    'tab.files.short': 'Tree',
    'tab.outline.short': 'Outl',
    'outline.layout': 'Outline Layout',
    'outline.pin.auto': 'Auto Hide',
    'outline.pin.fixed': 'Dock',

    'lib.menu': 'Library',
    'lib.toggle': 'Show/Hide File Tree (Ctrl+Shift+Z)',
    'lib.choose': 'Manage',
    'lib.refresh': 'Refresh',
    'lib.choose.short': 'Manage',
    'lib.refresh.short': 'Ref',
    'lib.pin.auto': 'Auto',
    'lib.pin.fixed': 'Dock',
    'lib.side.left': 'Left',
    'lib.side.right': 'Right',
    'lib.side.toggle': 'Switch library side',

    'about.title': 'About',
    'about.tagline': 'A cross‑platform, lightweight and polished Markdown editor & PDF reader.',
    'about.close': 'Close',
    'about.license.brief': 'License: GNU General Public License, Version 3 (GPL-3.0) ',
    'about.license.link': 'View full license',
    'about.official': 'Official Site',
    'about.blog': 'Website: ',
    'about.github': 'GitHub: ',
    'about.shortcuts': 'Shortcuts',
    'about.shortcuts.action': 'Action',
    'about.shortcuts.keys': 'Shortcut',

    'sc.newFile': 'New File',
    'sc.openFile': 'Open File',
    'sc.saveFile': 'Save File',
    'sc.saveAs': 'Save As',
    'sc.toggleWysiwyg': 'Toggle WYSIWYG',
    'sc.toggleEditPreview': 'Toggle Edit/Preview',
    'sc.focusMode': 'Focus Mode',
    'sc.newTab': 'New Tab',
    'sc.findReplace': 'Find & Replace',
    'sc.commandPalette': 'Command Palette',
    'sc.toggleFileTree': 'Show/Hide File Tree',
    'sc.print': 'Print',
    'sc.insertLink': 'Insert Link',
    'sc.bold': 'Bold',
    'sc.italic': 'Italic',
    'sc.splitPreview': 'Split Preview',
    'sc.closeTab': 'Close Tab',
    'sc.cycleTabs': 'Cycle Tabs',
    'sc.openInNewTabFromLibrary': 'Open from library in new tab',
    'sc.adjustWidth': 'Adjust content width',
    'sc.zoom': 'Zoom text/images',
    'sc.nativeMenu': 'Open native menu',

    'dlg.ok': 'OK',
    'dlg.cancel': 'Cancel',
    'dlg.insert': 'Insert',
    'dlg.rename': 'Rename',
    'dlg.link': 'Insert Link',
    'dlg.text': 'Text',
    'dlg.url': 'URL',
    'dlg.test': 'Test Connection',
    'dlg.link.text.ph': 'Link text',
    'dlg.url.ph': 'https://',
    'dlg.name': 'Name',
    'dlg.name.ph': 'Enter new name',
    'dlg.ext': 'Extension',
    // Common / dialog extensions
    'dlg.delete': 'Delete',
    // Exit confirmation
    'dlg.exit.title': 'Exit Confirmation',
    'dlg.exit.unsaved': 'Unsaved changes detected in the current document',
    'dlg.exit.save': 'Save and exit',
    'dlg.exit.discard': 'Exit without saving',
    // Library delete
    'dlg.libDelete.title.file': 'Delete document',
    'dlg.libDelete.title.dir': 'Delete folder',
    'dlg.libDelete.name.file': 'this file',
    'dlg.libDelete.name.dir': 'this folder',
    'dlg.libDelete.msg.file': 'Delete document "{name}"?\nThe file will be moved to the recycle bin.',
    'dlg.libDelete.msg.dir': 'Delete folder "{name}" and all its contents?\nThe files will be moved to the recycle bin.',
    // WebDAV sync dialogs
    'dlg.sync.conflict.title': 'File conflict',
    'dlg.sync.conflict.msg': 'File: {name}\n\nThis file was modified both locally and remotely. Choose which version to keep:',
    'dlg.sync.conflict.remote': 'Keep remote version',
    'dlg.sync.conflict.local': 'Keep local version',
    'dlg.sync.localDelete.title': 'File deleted locally',
    'dlg.sync.localDelete.msg': 'File: {name}\n\nThis file was deleted locally since the last sync. Choose an action:',
    'dlg.sync.localDelete.restore': 'Restore from remote',
    'dlg.sync.localDelete.deleteRemote': 'Delete remote copy',
    'dlg.sync.remoteDelete.title': 'File deleted on server',
    'dlg.sync.remoteDelete.msg': 'File: {name}\n\nThis file no longer exists on the remote server. Choose an action:',
    'dlg.sync.remoteDelete.keepLocal': 'Keep local file',
    'dlg.sync.remoteDelete.deleteLocal': 'Delete local copy',
    'dlg.sync.uploadMissing.title': 'Upload local file to server',
    'dlg.sync.uploadMissing.msg': 'File: {name}\n\nThe file exists locally, but not on the server (new file or deleted on another device). Choose an action:',
    'dlg.sync.uploadMissing.keepLocal': 'Keep local only',
    'dlg.sync.uploadMissing.upload': 'Upload to server',

    'status.pos': 'Ln {line}, Col {col}',
    'filename.untitled': 'Untitled',
    'editor.placeholder': 'Type Markdown here…',

    // Uploader (S3/R2 + ImgLa)
    'upl.title': 'Image Host Settings',
    'upl.desc': 'Automatically uploads pasted/dragged images to the selected image host when enabled. Takes effect after saving.',
    'upl.section.provider': 'Provider',
    'upl.provider': 'Image Host',
    'upl.provider.s3': 'S3/R2',
    'upl.provider.imgla': 'Lsky/ImgLa',
    'upl.provider.hint': 'Only shows settings for the selected provider; switching does not clear the other provider configuration.',
    'upl.refresh': 'Refresh',
    'upl.section.basic': 'Basic',
    'upl.enable': 'Enable',
    'upl.alwaysLocal': 'Always save locally',
    'upl.hint.alwaysLocal': 'When enabled, pasted/dragged/linked images are copied into the current document\'s images folder and applied immediately.',
    'upl.ak': 'AccessKeyId',
    'upl.ak.ph': 'Required',
    'upl.sk': 'SecretAccessKey',
    'upl.sk.ph': 'Required',
    'upl.bucket': 'Bucket',
    'upl.bucket.ph': 'Required',
    'upl.endpoint': 'Custom Endpoint',
    'upl.endpoint.ph': 'e.g. https://xxx.r2.cloudflarestorage.com',
    'upl.endpoint.hint': 'R2: https://<accountid>.r2.cloudflarestorage.com; S3: https://s3.<region>.amazonaws.com',
    'upl.region': 'Region (optional)',
    'upl.region.ph': 'R2: auto; S3: e.g. ap-southeast-1',
    'upl.section.access': 'Public Domain & Path',
    'upl.domain': 'Custom Domain',
    'upl.domain.ph': 'e.g. https://img.example.com',
    'upl.domain.hint': 'If set, the public URL will use this domain.',
    'upl.template': 'Upload Path Template',
    'upl.template.ph': '{year}/{month}{fileName}{md5}.{extName}',
    'upl.template.hint': 'Available vars: {year}{month}{day}{fileName}{md5}{extName}',
    'upl.section.advanced': 'Advanced',
    'upl.pathstyle': 'Path-Style (recommended for R2)',
    'upl.acl': 'public-read',
    // ImgLa (Lsky Pro+)
    'upl.imgla.section': 'Lsky/ImgLa (Lsky Pro+)',
    'upl.imgla.home': 'ImgLa Homepage',
    'upl.imgla.baseUrl': 'Base URL',
    'upl.imgla.baseUrl.ph': 'Default https://www.imgla.net',
    'upl.imgla.baseUrl.hint': 'Lsky Pro+ compatible API; leave empty to use default (no trailing /)',
    'upl.imgla.token': 'Token',
    'upl.imgla.token.ph': 'Bearer Token',
    'upl.imgla.token.hint': 'Create a token in ImgLa admin; stored locally in your settings',
    'upl.imgla.strategy': 'Strategy ID',
    'upl.imgla.strategy.ph': 'Default 1',
    'upl.imgla.strategy.hint': 'Upload strategy_id (usually a number)',
    'upl.imgla.album': 'Album Scope',
    'upl.imgla.album.hint': 'Album list is fetched from the server; gallery only shows images within the selected album',
    // WebP conversion
    'upl.webp.enable': 'Convert to WebP before upload',
    'upl.webp.quality': 'WebP Quality',
    'upl.webp.quality.hint': 'Range 0.6–0.95, default 0.85; higher = better quality but larger size',
    'upl.webp.local': 'Also convert local saves to WebP',

    // WebDAV Sync
    'sync.title': 'WebDAV Sync Settings',
    'sync.desc': 'Automatically sync library files to a WebDAV server. The first upload computes hashes and may take time.',
    'sync.warn.global': '⚠️ The sync feature is new and under testing. Please back up your data.',
    'sync.section.basic': 'Basic',
    'sync.enable': 'Enable Sync',
    'sync.onstartup': 'Sync on Startup',
    'sync.onshutdown': 'Sync on Exit',
    'sync.warn.onshutdown': '⚠️ When enabled, the window hides and continues syncing; the app exits after completion.',
    'sync.allowHttp': 'Allow HTTP',
    'sync.allowHttp.warn': '⚠️ Data sent in plaintext, risk of leakage! Trusted networks only!',
    'sync.allowHttp.hosts': 'Allowed HTTP hosts',
    'sync.allowHttp.addHost': 'Add host',
    'sync.allowHttp.removeHost': 'Remove',
    'sync.allowHttp.hostPlaceholder': 'e.g. 192.168.0.8 or 192.168.0.8:6086',
    'sync.allowHttp.hostsHint': 'Leave empty for no restriction; add host or host:port to limit HTTP sync targets',
    'sync.timeout.label': 'Timeout (ms)',
    'sync.timeout.suggest': 'Recommended 120000 (2 minutes); increase for slow networks.',
    'sync.conflict': 'Conflict Strategy',
    'sync.conflict.newest': 'Pick newer automatically (recommended)',
    'sync.conflict.ask': 'Ask every time',
    'sync.conflict.remote': 'Always keep remote',
    'sync.conflict.hint': 'How to handle when both local and remote files are modified',
    'sync.localDelete': 'Local file delete strategy',
    'sync.localDelete.auto': 'Auto delete (remote deleted and local unchanged)',
    'sync.localDelete.ask': 'Ask the user',
    'sync.localDelete.keep': 'Always keep local file',
    'sync.localDelete.hint': 'How to handle local files when remote files are deleted',
    'sync.confirmDeleteRemote': 'Confirm remote delete',
    'sync.confirmDeleteRemote.toggle': 'Ask for confirmation when deleting remote files',
    'sync.confirmDeleteRemote.hint': 'If disabled, delete operations run automatically',
    'sync.encrypt.enable': 'Encrypt content',
    'sync.encrypt.key': 'Encryption key',
    'sync.encrypt.key.placeholder': 'Enter a passphrase (min 8 chars)',
    'sync.encrypt.key.hint': 'Used only to encrypt data stored on WebDAV. The key is not synced; losing it means remote files cannot be decrypted.',
    'sync.encrypt.warn': '⚠️ Encrypt sync: all files uploaded to WebDAV are stored encrypted. Remember the key, or files cannot be decrypted.',
    'sync.encrypt.keyRequired': 'Encryption is enabled but no valid key is set (min 8 chars).',
    'sync.smartSkip': 'Smart skip remote scan (minutes)',
    'sync.smartSkip.hint': 'If no local changes and within this window, skip remote scan (0 means always scan).',
    'sync.server': 'WebDAV Server',
    'sync.root.hint': 'Files will sync under this path. Library configurations are independent; do not use the same directory.',
    'sync.user': 'Username',
    'sync.pass': 'Password',
    'sync.tooltip.notConfigured': 'WebDAV sync is not configured for this library; sync is disabled.',
    'sync.tooltip.disabled': 'WebDAV sync is configured but currently disabled.',
    'sync.openlog': 'Sync Records',
    'sync.now': 'Sync Now (F5)',
    'sync.save': 'Save',
    'sync.saved': 'WebDAV sync settings saved',
    'sync.save.fail': 'Save failed: {msg}',

    'ft.move.within': 'Only moves within the library are allowed',
    'ft.exists': 'Target already exists',
    'ft.conflict.prompt': 'Choose an action',
    'action.overwrite': 'Overwrite',
    'action.renameAuto': 'Rename automatically',
    'action.cancel': 'Cancel',

    // Language menu
    'lang.auto': 'Auto',
    'lang.zh': '中文',
    'lang.en': 'English',
    'lang.restartToApply': 'Please restart the app to fully apply the new language',

    // Context menu
    'ctx.newFile': 'New File Here',
    'ctx.newFolder': 'New Folder Here',
    'ctx.customIcon': 'Custom Icon',
    'ctx.moveTo': 'Move to…',
    'ctx.pastePlain': 'Paste as Plain Text',
    'ctx.openNewInstance': 'Open in new instance',
    'ctx.createSticky': 'Create sticky note',
    'ctx.rename': 'Rename',
    'ctx.delete': 'Delete',
    'ctx.sortNameAsc': 'Sort by name A→Z',
    'ctx.sortNameDesc': 'Sort by name Z→A',
    'ctx.sortTimeDesc': 'Sort by time: newest first',
    'ctx.sortTimeAsc': 'Sort by time: oldest first',

    // Extensions & Plugins
    'ext.title': 'Extensions & Plugins',
    'ext.install.section': 'Install Extensions (GitHub / URL / Local)',
    'ext.install.placeholder': 'Enter URL or username/repository@branch (branch optional)',
    'ext.install.btn': 'Install',
    'ext.builtin': 'Built-in Extensions',
    'ext.installed': 'Installed',
    'ext.available': 'Extension Marketplace',
    'ext.market.channel': 'Channel',
    'ext.market.channel.github': 'GitHub',
    'ext.market.channel.official': 'Official',
    'ext.market.category.label': 'Category',
    'ext.market.category.all': 'All',
    'ext.category.publishSync': 'Publish / Sync',
    'ext.category.editing': 'Editing',
    'ext.category.docTools': 'Document Tools',
    'ext.category.collab': 'Collaboration / Versioning',
    'ext.category.ai': 'AI',
    'ext.category.imageHosting': 'Image Hosting',
    'ext.category.knowledge': 'Knowledge Management',
    'ext.market.search.placeholder': 'Search by name, author or description…',
	    'ext.market.empty.search': 'No extensions match the search.',
	    'ext.refresh': 'Refresh',
	      'ext.update.btn': 'Update',
	      'ext.update.now': 'Update now',
	      'ext.update.ok': 'Extension updated',
	      'ext.update.fail': 'Failed to update extension',
	      'ext.update.notice.single': 'Extension {name} has an update',
	      'ext.update.notice.multi': '{count} extensions have updates: {names}',
    'ext.settings': 'Settings',
    'ext.settings.notProvided': 'This extension has no settings',
    'ext.settings.openFail': 'Failed to open extension settings',
    'ext.toggle.enable': 'Enable',
    'ext.toggle.disable': 'Disable',
    'ext.toggle.fail': 'Failed to toggle extension',
    'ext.remove': 'Remove',
    'ext.remove.confirm': 'Remove extension {name}?',
    'ext.removed': 'Extension removed',
    'ext.remove.fail': 'Failed to remove extension',
    'ext.install.ok': 'Installed',
    'ext.install.fail': 'Failed to install extension',
    'ext.install.browseLocal': 'Browse…',
    'ext.enabled.tag.on': '✓ Enabled',
    'ext.enabled.tag.off': 'Disabled',
    'ext.tag.featured': 'Featured',
    'ext.author': 'Author:',
    'ext.homepage': 'Homepage',
    'ext.header.manage': 'Extensions',
    'ext.filter.installedOnly': 'Installed only',
    'ext.filter.updatesOnly': 'Updatable only',
    'ext.filter.installedChip': 'Installed',
    'ext.filter.showStandalone': 'Pin to bar',
    'ext.filter.showStandalone.on': 'Pinned to menu bar',
    'ext.filter.showStandalone.off': 'Moved into Plugins menu',
    'ext.filter.showStandalone.fail': 'Failed to toggle display mode',
    'ext.chooseFolder.title': 'Choose extension folder',
    'ext.market.loading': 'Marketplace loading…',
    'ext.vendor.official': 'Official',
    'ext.vendor.thirdParty': 'Third-party',
    'ext.thirdParty.notice': 'All third-party extensions are reviewed, but they may still pose data and privacy risks.',
    // Official extensions (shared semantics with website)
    'ext.ai.name': 'AI  Assistant',
    'ext.ai.author': 'By: FlyMD',
    'ext.ai.desc': 'Intelligent writing assistant with AI-assisted writing, content polishing, grammar checking and error correction. Let AI be your writing partner to significantly improve efficiency and quality. Supports multiple AI models with customizable prompts.',
    'ext.pdf.name': 'Batch Export PDF',
    'ext.pdf.author': 'By: FlyMD',
    'ext.pdf.desc': 'Select and batch export multiple Markdown documents to PDF files at once. Perfect for bulk document processing scenarios.',
    'ext.typechoPub.name': 'Typecho Publisher',
    'ext.typechoPub.author': 'By: HansJack',
    'ext.typechoPub.desc': 'One-click publish Markdown documents to Typecho blog platform. Supports article editing, category management, tag settings, automatic image upload and more. Makes blog publishing simple and efficient.',
    'ext.wordcount.name': 'Word Count',
    'ext.wordcount.author': 'By: FlyMD',
    'ext.wordcount.desc': 'Real-time display of character count, word count, paragraph count and reading time. Helps you better control article length and improve writing efficiency. Supports mixed Chinese/English statistics with precision.',
    'ext.todoPush.name': 'Todo Reminder',
    'ext.todoPush.author': 'By: FlyMD & xxtui',
    'ext.todoPush.desc': 'Smart reminder assistant that automatically identifies unfinished TODO items in documents and pushes them to designated recipients via WeChat, SMS or email at scheduled times. Supports custom push rules and multi-person collaboration reminders to ensure important tasks are never missed.',
    'ext.markdownTable.name': 'Markdown Table Helper',
    'ext.markdownTable.author': 'By: FlyMD',
    'ext.markdownTable.desc': 'Quickly insert Markdown tables at the cursor position, with configurable rows and columns to speed up table editing.',
    'ext.editorEnhancer.name': 'Editor Enhancer',
    'ext.editorEnhancer.author': 'By: xxtui',
    'ext.editorEnhancer.desc': 'Type “/” on an empty line to trigger commands, with customizable triggers and templates.',
    'ext.gitHistory.name': 'Git Version History',
    'ext.gitHistory.author': 'By: FlyMD',
    'ext.gitHistory.desc': 'Provides Git snapshots and a history sidebar for the current repository and document, with one-click rollback to any version for safe version management.',
    'ext.backlinks.name': 'Backlinks',
    'ext.backlinks.author': 'By: FlyMD',
    'ext.backlinks.desc': 'Automatically builds forward and backward links between notes based on [[Title]] syntax, and offers a backlinks sidebar plus AI-powered related-note suggestions to form a lightweight knowledge graph.',
    'ext.graphView.name': 'Graph View',
    'ext.graphView.author': 'By: FlyMD',
    'ext.graphView.desc': 'Graph view based on backlinks index, visualizing local connections around the current document as the center so you can see relationships at a glance.',
    'ext.officeImporter.name': 'Word/Excel Importer',
    'ext.officeImporter.author': 'By: FlyMD',
    'ext.officeImporter.desc': 'Parses local Word/Excel files and imports them as Markdown, preserving basic structure. Ideal for migrating existing documents into a Markdown workflow.',
    'ext.s3Gallery.name': 'Image Gallery',
    'ext.s3Gallery.author': 'By: FlyMD',
    'ext.s3Gallery.desc': 'Browse and manage images from the image host, with support for copying links, inserting into the current document and deleting remote objects.',
    'ext.autoyaml.name': 'AutoYAML Metadata',
    'ext.autoyaml.author': 'By: FlyMD',
    'ext.autoyaml.desc': 'Automatically fills YAML front matter (title/created/updated/tags, etc.) for the current document, and can optionally call the AI assistant to generate tags and summaries.',
    'ext.mineru.name': 'MinerU PDF/Image Parser',
    'ext.mineru.author': 'By: FlyMD',
    'ext.mineru.desc': 'Uses the official MinerU API to parse local PDF and image files, returning a ZIP with the extracted results.',
    'ext.typechoManager.name': 'Typecho Post Manager',
    'ext.typechoManager.author': 'By: FlyMD',
    'ext.typechoManager.desc': 'Fetches posts from Typecho into local Markdown with time/category filters, and allows overwriting remote posts from the current document to keep local and blog content in sync.',
    'ext.builtin.uploaderS3.name': 'Image Host Manager',
    'ext.builtin.uploaderS3.desc': 'Uploads pasted or dragged images to the built-in S3/R2 image host, using credentials from Settings.',
    'ext.builtin.webdav.name': 'WebDAV Sync',
    'ext.builtin.webdav.desc': 'Syncs on F5 / startup / before close using modified time to resolve conflicts.',
    'ext.pdf2doc.name': 'High-Precision PDF Parser',
    'ext.pdf2doc.author': 'By: FlyMD',
    'ext.pdf2doc.desc': 'Uses large models to accurately parse PDFs into Markdown or DOCX, with support for handwriting, layouts, formulas and tables.',
    'ext.whiteboardView.name': 'Whiteboard View',
    'ext.whiteboardView.author': 'By: FlyMD',
    'ext.whiteboardView.desc': 'Place Markdown note nodes on a visual canvas and connect them with simple links.',
    'ext.noteTemplates.name': 'Notes & Tasks Calendar',
    'ext.noteTemplates.author': 'By: FlyMD',
    'ext.noteTemplates.desc': 'Provides templates for journals, meeting notes and reading notes, plus a simple calendar and task overview based on YAML front matter and TODO syntax.',
    'ext.blinkoSnap.name': 'Send to Blinko',
    'ext.blinkoSnap.author': 'By: FlyMD',
    'ext.blinkoSnap.desc': 'Adds a context-menu action to send the current content to Blinko with one click.',
    'ext.floatingToolbar.name': 'Floating Rich Text Toolbar',
    'ext.floatingToolbar.author': 'By: FlyMD',
    'ext.floatingToolbar.desc': 'Floating toolbar that can be dragged and snapped to the top, with configurable heading shortcuts and other editing enhancements.',
    'ext.propertyView.name': 'Property View',
    'ext.propertyView.author': 'By: FlyMD',
    'ext.propertyView.desc': 'Property query and list view powered by YAML metadata and tags.',
    'ext.xhsCopywriter.name': 'Xiaohongshu Copywriter',
    'ext.xhsCopywriter.author': 'By: Vita0519',
    'ext.xhsCopywriter.desc': 'Integrates AI with built-in Xiaohongshu viral styles and supports one-click polishing, expansion and custom prompt templates.',
    'ext.localCollab.name': 'Collaborative Editing',
    'ext.localCollab.author': 'By: FlyMD',
    'ext.localCollab.desc': 'Simple multi-user collaboration plugin that connects to a collaboration server.',

    // Plugin menu manager
    'plugins.menuManager.title': 'Plugin Menu Manager',
    'plugins.menuManager.col.plugin': 'Extension',
    'plugins.menuManager.col.context': 'Context Menu',
    'plugins.menuManager.col.dropdown': 'Plugins Menu',
    'plugins.menuManager.tip': 'Checked means visible; unchecking hides the corresponding menu entry.',
    'plugins.menuManager.empty': 'No registered extension menus found.',
  },
} as const

export function t(key: keyof typeof dict['zh'], params?: Record<string, string | number>): string {
  const locale = getLocale()
  let s = (dict as any)[locale]?.[key] ?? (dict as any)['zh']?.[key] ?? String(key)
  if (!params) return s
  try {
    for (const [k, v] of Object.entries(params)) {
      s = s.replaceAll(`{${k}}`, String(v))
    }
  } catch {}
  return s
}

export function tLocale(locale: Locale, key: keyof typeof dict['zh'], params?: Record<string, string | number>): string {
  let s = (dict as any)[locale]?.[key] ?? (dict as any)['zh']?.[key] ?? String(key)
  if (!params) return s
  try {
    for (const [k, v] of Object.entries(params)) {
      s = s.replaceAll(`{${k}}`, String(v))
    }
  } catch {}
  return s
}

export function fmtStatus(line: number, col: number): string {
  return t('status.pos', { line, col })
}
